{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","_http","filePicker","file","fileTransfer","httpClient","sURL","oRequest","XMLHttpRequest","silentDownload","saveMode","pickFile","then","uri","console","log","ending","substring","length","downloadAndRead","err","currentUrl","downloadUrl","dataDirectory","transfer","create","url","encodeURI","downloadAndRead2","dropBoxUrl","replace","resolveLocalFilesystemUrl","files","toURL","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Blank\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Blank</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <div id=\\\"container\\\">\\n    <ion-button (click)=\\\"this.chooseFile()\\\">Open Files</ion-button>\\n    <strong>Ready to create an app?</strong>\\n    <p>Start with Ionic <a target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" \\n      href=\\\"https://ionicframework.com/docs/components\\\">UI Components</a>\\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n    </p>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQUFGOztBQUdBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FBQUY7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQUZGOztBQUtBO0VBQ0UscUJBQUE7QUFGRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG59XG5cbiNjb250YWluZXIgc3Ryb25nIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBsaW5lLWhlaWdodDogMjZweDtcbn1cblxuI2NvbnRhaW5lciBwIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjJweDtcblxuICBjb2xvcjogIzhjOGM4YztcblxuICBtYXJnaW46IDA7XG59XG5cbiNjb250YWluZXIgYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn0iXX0= */\";","import { Component } from '@angular/core';\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { IOSFilePicker } from '@ionic-native/file-picker/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileTransfer } from '@ionic-native/file-transfer/ngx';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  sURL: string = \n  'https://dl.dropboxusercontent.com/s/iaxtm7efi73arud/dummy.pdf?dl=0'     // Normal dropbox.com domain would give CORS error\n  oRequest = new XMLHttpRequest();\n  silentDownload: Boolean = false;                         // silentDownload hides link and clicks without user input\n  saveMode: Boolean = true;                                // toggles between save and read functions\n  blob: Blob;\n  blobText: string;\n  //console.clear();\n  //console.log('Running...');\n  \n  constructor(private _http: HTTP,\n    private filePicker: IOSFilePicker,\n    private file:File,\n    private fileTransfer: FileTransfer,\n    private httpClient:HttpClient\n  ) {}\n  \n//here we choose a file from the file picker\nchooseFile(){\n  this.filePicker.pickFile()\n  .then(uri =>{\n    console.log(\"uri= \"+uri);\n    var ending=uri.substring(\n      uri.length-3,3);\n    console.log(\"ending= \"+ending);\n    //if it is a pdf file ,then we download it\n    if(ending =='pdf'){\n      //this.downloadAndOpenPdf();\n      console.log(\"ending2= \");\n\n    }else{\n      console.log('uri original= '+uri);\n      this.downloadAndRead(uri);\n    }\n  })\n  .catch(err => console.log('Error0=', err));\n  console.log('hei5');\n}\n\n//1st approach\ndownloadAndRead(currentUrl) { \n  ////var/mobile/Containers/Data/Application\n  //currentUrl=currentUrl.\n  //replace(\"/private\",\"file://\");//file://\n  \n  console.log('download pdf1 currentUrl= '+currentUrl);\n  //currentUrl='file:///var/containers/bundle/Applications/var/mobile/Containers/Data/Application/'+\n  //'B7C41B3B-759E-477F-997B-CA0BE4A41D1C/AppData/tmp/DysEditor-Inbox/'+\n  //'myfile.pdf';\n  //currentUrl=this.sURL;\n  let downloadUrl =currentUrl;//'https://devdactic.com/html/5-simple-hacks-LBT.pdf';\n  let path = this.file.dataDirectory;\n  \n  console.log('path2= '+path);\n  const transfer = this.fileTransfer.create();\n  //const filePath = this.file.dataDirectory + fileName; \n  //currentUrl=currentUrl.replace(\"/private\",\"file://\");\n  var url = encodeURI(currentUrl);\n  console.log('this._http= '+this._http);\n  this.downloadAndRead2(downloadUrl);\n  \n}\ndownloadAndRead2(dropBoxUrl) {\n    console.log('IN READ MODE. Reading file');\n    dropBoxUrl=dropBoxUrl.replace(\"/private\",\"file:///private\");\n    console.log('dropboxurl= '+dropBoxUrl);\n    this.file.resolveLocalFilesystemUrl(\n      dropBoxUrl).then(\n      (files) => {\n          console.log('pdf file found : ' + files.toURL());\n          //var reader = new FileReader();\n      //reader.onloadend = function() {\n      //console.log('this= '+this);\n      //console.log(\"Successful file read: \" + this.result);\n      //var blob = new Blob(<BlobPart[]><unknown>new Uint8Array(<ArrayBuffer>\n      //reader.result), \n      //{ type: \"application/pdf\" });\n      //};\n      console.log('blob= '+files);\n      //reader.readAsArrayBuffer(file);\n      }\n      \n  ).catch(\n      (err) => {\n          console.log('pdf file not found');\n      }\n  );\n    }\n  }\n\n\n\n    /*this.oRequest.open('GET', dropBoxUrl, false);//this.sURL\n    var _this = this;\n    this.oRequest.onreadystatechange = function(oEvent){  \n      console.log('request status= '+_this.oRequest.readyState);\n      if (_this.oRequest.readyState === 4) {\n        console.log('_this.oRequest.status= '+_this.oRequest.status);\n        if (_this.oRequest.status === 200) {\n          console.log('Success= '+_this.oRequest.responseText);           // This is the document contents\n        } else {\n          console.log('Error= '+ _this.oRequest.statusText);    \n          // e.g. if document is not found\n        }\n      }\n    }  \n    \n    //    oRequest.setRequestHeader('User-Agent',navigator.userAgent); \n    try {\n      console.log('hei5');\n      this.oRequest.send(null);\n    } catch (err) {\n      console.error('err2= '+err);\n    }*/\n    \n    //setTimeout(() => {\n     //dropBoxUrl='/var/mobile/Containers/Data/Application/67EF7B71-CEB8-4788-B98B-191D92BD1430/tmp/TestHttp-Inbox/myfile.pdf';\n      //let path = this.file.dataDirectory;\n    //this._http.downloadFile(dropBoxUrl, {},{}, path + 'myfile2.pdf'\n    //).then(\n    \n    \n    /*function(entry) {\n      entry.file(function (file) {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n      console.log('this= '+this);\n      console.log(\"Successful file read: \" + this.result);\n      var blob = new Blob(<BlobPart[]><unknown>new Uint8Array(<ArrayBuffer>\n      reader.result), \n      { type: \"application/pdf\" });\n      };\n      console.log('hei1');\n      reader.readAsArrayBuffer(file);\n      }, function(err) {\n      console.log('err2= '+err);\n      });\n    };\n    }, 500);*/\n    \n\n\n//}\n/*this._http.downloadFile(currentUrl, {},{}, path + 'myfile2.pdf'\n  ).then(\n  function(entry) {\n  entry.file(function (file) {\n  var reader = new FileReader();\n  reader.onloadend = function() {\n  console.log('this= '+this);\n  console.log(\"Successful file read: \" + this.result);\n  var blob = new Blob(<BlobPart[]><unknown>new Uint8Array(<ArrayBuffer>\n  reader.result), \n  { type: \"application/pdf\" });\n  };\n  console.log('hei1');\n  reader.readAsArrayBuffer(file);\n  }, function(err) {\n  console.log(err);\n  });\n  }\n  ).catch(err => {\n  // prints 403\n  console.log('new error block ... ', err.status);\n  // prints Permission denied\n  console.log('new error block ... ', err.error);\n  });*/"]}