{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","_http","filePicker","file","fileTransfer","httpClient","sURL","oRequest","XMLHttpRequest","silentDownload","saveMode","event","pickFile","then","uri","console","log","ending","substring","length","downloadAndRead","err","dropBoxUrl","replace","resolveLocalFilesystemUrl","entry","reader","FileReader","onloadend","encodedFile","src","target","result","split","contentAsBase64EncodedString","readAsDataURL","error","_this","addEventListener","blobText","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Blank\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Blank</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <div id=\\\"container\\\">\\n    <ion-button (click)=\\\"this.chooseFile($event)\\\">Open Files</ion-button>\\n    <strong>Ready to create an app?</strong>\\n    <p>Start with Ionic <a target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" \\n      href=\\\"https://ionicframework.com/docs/components\\\">UI Components</a>\\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n      Start with Ionic Start with Ionic Start with Ionic Start with Ionic \\n    </p>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQUFGOztBQUdBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FBQUY7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQUZGOztBQUtBO0VBQ0UscUJBQUE7QUFGRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG59XG5cbiNjb250YWluZXIgc3Ryb25nIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBsaW5lLWhlaWdodDogMjZweDtcbn1cblxuI2NvbnRhaW5lciBwIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjJweDtcblxuICBjb2xvcjogIzhjOGM4YztcblxuICBtYXJnaW46IDA7XG59XG5cbiNjb250YWluZXIgYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn0iXX0= */\";","import { Component } from '@angular/core';\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { IOSFilePicker } from '@ionic-native/file-picker/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { File, Entry } from '@ionic-native/file/ngx';\nimport { FileTransfer } from '@ionic-native/file-transfer/ngx';\ndeclare var Buffer;\n//import * as Blob from \"blob\";\ndeclare var require: any;\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  sURL: string = \n  'https://dl.dropboxusercontent.com/s/iaxtm7efi73arud/dummy.pdf?dl=0'     // Normal dropbox.com domain would give CORS error\n  oRequest = new XMLHttpRequest();\n  silentDownload: Boolean = false;                         // silentDownload hides link and clicks without user input\n  saveMode: Boolean = true;                                // toggles between save and read functions\n  blob: Blob;\n  blobText: string;\n  //console.clear();\n  //console.log('Running...');\n  \n  constructor(private _http: HTTP,\n    private filePicker: IOSFilePicker,\n    private file:File,\n    private fileTransfer: FileTransfer,\n    private httpClient:HttpClient\n  ) {}\n  \n//here we choose a file from the file picker\nchooseFile(event){\n  this.filePicker.pickFile()\n  .then(uri =>{\n    console.log(\"uri= \"+uri);\n    let ending=uri.substring(\n      uri.length-3,3);\n    console.log(\"ending= \"+ending);\n    //if it is a pdf file ,then we download it\n    if(ending =='pdf'){\n      //this.downloadAndOpenPdf();\n      console.log(\"ending2= \");\n\n    }else{\n      console.log('uri original= '+uri);\n      //this.downloadAndRead(uri);\n      this.downloadAndRead(uri,event);\n    }\n  })\n  .catch(err => console.log('Error0=', err));\n  console.log('hei5');\n}\n\n//2nd approach\n/*downloadAndOpenPdf(uri) {\n  console.log('IN SAVE MODE. Creating blob link...');\n  this.oRequest.open('GET', this.sURL);                                   // Creates the HTTP request\n  this.oRequest.responseType = 'blob';\n  var _this = this;\n  this.oRequest.onload = function() {\n    console.log('hei4');\n    _this.blob = this.response;                                       // Save response to blob object\n    _this.readBlob();                                                 // Read the blob if we like\n    console.log('rb2');\n    /*const link = document.createElement('a');\n    link.href = URL.createObjectURL(_this.blob);                      // Creates a blob link\n    console.log('rb3');\n    if (!_this.silentDownload) link.innerHTML = 'Download the file';\n    link.download = 'my-dummy-file.pdf';                        // Gives the file a name\n    console.log('rb4');\n    document.body.appendChild(link);\n    console.log('hei5');\n    \n    if (_this.silentDownload){\n      console.log('Silently downloading the file...');\n      link.click();                                             // Automatically triggers the link\n    }/  \n  }\n  //console.log('rb6');\n\n  this.oRequest.send();                                              // Initiates the HTTP request\n}*/\n/*downloadAndRead(uri) {\n  console.log('IN READ MODE. Reading file');\n  this.oRequest.open('GET', this.sURL, false);\n  var _this = this;\n  this.oRequest.onreadystatechange = function(oEvent){  \n    if (_this.oRequest.readyState === 4) {\n      if (_this.oRequest.status === 200) {\n        console.log(_this.oRequest.responseText);           // This is the document contents\n      } else {\n        console.log('Error', _this.oRequest.statusText);    // e.g. if document is not found\n      }\n    }\n  }\n\n  //    oRequest.setRequestHeader('User-Agent',navigator.userAgent); \n  try {\n    this.oRequest.send(null);\n  } catch (err) {\n    console.error(err);\n  }\n}\nreadBlob(){\n  console.log('Reading the blob...')\n  const reader = new FileReader();\n  var _this = this;\n  reader.addEventListener('loadend', () => {\n    console.log('rb1');\n    _this.blobText = ''+reader.result;\n    console.log(this.blobText);\n  });\n  //reader.readAsText(_this.blob);\n}*/\n\n//2nd approach\ndownloadAndRead(dropBoxUrl:string,event) {\n    console.log('IN READ MODE. Reading file');\n    dropBoxUrl = dropBoxUrl.replace(\"/private\",\"file:///private\");\n    console.log('dropboxurl=',dropBoxUrl);\n    this.file.resolveLocalFilesystemUrl(dropBoxUrl).then((entry: any)=>{\n      entry.file(function (file) {\n        let reader = new FileReader();\n        console.log('hei1');\n        reader.onloadend = function (encodedFile: any) {\n          console.log('hei2');\n          let src = encodedFile.target.result;\n          console.log('src1= ', src);\n          src = src.split(\"base64,\");\n          console.log('src2= ', src);\n          let contentAsBase64EncodedString = src[1];\n          console.log('contentAsBase64EncodedString= ', contentAsBase64EncodedString);\n\n        };\n        console.log('hei3');\n        reader.readAsDataURL(file);\n        console.log('hei4');\n\n      })\n    }).catch((error)=>{\n      console.log(error);\n    })\n}\nprivate readPdfFile(file: any, event) {\n  const reader = new FileReader();\n  console.log('reader is ',reader);\n  reader.onloadend = () => {\n    // const imgBlob = new Blob([reader.result], {type: file.type});\n    console.log('reader2 is ', reader);\n    \n  };\n  console.log('reader3 is ', reader);\n  // var blob = new Blob(<BlobPart[]><unknown>new Uint8Array(<ArrayBuffer>\n    // file.files[0]), \n    // { type: \"application/pdf\" });\n    // };\n    // console.log('new blob is ', file.blob());\n    // const Blob = require('blob');\n    // let b = new Blob(file);\n    // console.log('b= ',b);  \n    // reader.readAsDataURL(file); //files[0]\n  console.log('event.target.result is ', event.target.result);\n  \n\n  /*reader.onloadend = () => {\n      const pdfBlob = new Blob([reader.result], {type: file.type});\n      console.log('pdfBlob: ',pdfBlob);\n  };\n  console.log('file.files= ',file.files);\n  console.log('file.files[0]= ',file.files[0]);\n  \n  reader.readAsArrayBuffer(file.files[0]);*/\n}\n\nreadBlob(){\n  console.log('Reading the blob...')\n  const reader = new FileReader();\n  var _this = this;\n  reader.addEventListener('loadend', () => {\n    _this.blobText = ''+reader.result;\n    console.log('reader7');\n    console.log(this.blobText);\n  });\n  \n  //reader.readAsText(_this.blob);\n}\n\n\n}\n"]}